2023-11-17 10:20:29.468 +01:00 INF Entity Framework Core 6.0.0 initialized 'RepositoryContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: None 
2023-11-17 10:32:18.486 +01:00 INF Entity Framework Core 6.0.0 initialized 'RepositoryContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: MigrationsAssembly=Hospital.API  
2023-11-17 10:33:45.886 +01:00 INF Entity Framework Core 6.0.0 initialized 'RepositoryContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.0' with options: MigrationsAssembly=Hospital.API  
2023-11-17 10:33:47.073 +01:00 INF Executed DbCommand (650ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [hospitaldb]; 
2023-11-17 10:33:47.315 +01:00 INF Executed DbCommand (237ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [hospitaldb] SET READ_COMMITTED_SNAPSHOT ON;
END; 
2023-11-17 10:33:47.349 +01:00 INF Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 
2023-11-17 10:33:47.478 +01:00 INF Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
); 
2023-11-17 10:33:47.482 +01:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 
2023-11-17 10:33:47.512 +01:00 INF Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]'); 
2023-11-17 10:33:47.530 +01:00 INF Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId]; 
2023-11-17 10:33:47.549 +01:00 INF Applying migration '20231117093218_hospital'. 
2023-11-17 10:33:47.604 +01:00 INF Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Hospital] (
    [HospitalId] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Logo] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Hospital] PRIMARY KEY ([HospitalId])
); 
2023-11-17 10:33:47.610 +01:00 INF Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Role] (
    [RoleId] nvarchar(450) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([RoleId])
); 
2023-11-17 10:33:47.617 +01:00 INF Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Address] (
    [AddressId] nvarchar(450) NOT NULL,
    [HospitalId] nvarchar(450) NOT NULL,
    [Number] int NULL,
    [City] nvarchar(max) NOT NULL,
    [State] nvarchar(max) NOT NULL,
    [Country] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Address] PRIMARY KEY ([AddressId]),
    CONSTRAINT [FK_Address_Hospital_HospitalId] FOREIGN KEY ([HospitalId]) REFERENCES [Hospital] ([HospitalId]) ON DELETE CASCADE
); 
2023-11-17 10:33:47.623 +01:00 INF Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resources] (
    [ResourcesId] nvarchar(450) NOT NULL,
    [HospitalId] nvarchar(450) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Resources] PRIMARY KEY ([ResourcesId]),
    CONSTRAINT [FK_Resources_Hospital_HospitalId] FOREIGN KEY ([HospitalId]) REFERENCES [Hospital] ([HospitalId]) ON DELETE CASCADE
); 
2023-11-17 10:33:47.880 +01:00 INF Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Staff] (
    [StaffId] nvarchar(450) NOT NULL,
    [RoleId] nvarchar(450) NOT NULL,
    [HospitalId] nvarchar(450) NOT NULL,
    [FirstName] nvarchar(max) NOT NULL,
    [LastName] nvarchar(max) NOT NULL,
    [UserName] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    [PhoneNumber] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Staff] PRIMARY KEY ([StaffId]),
    CONSTRAINT [FK_Staff_Hospital_HospitalId] FOREIGN KEY ([HospitalId]) REFERENCES [Hospital] ([HospitalId]) ON DELETE CASCADE,
    CONSTRAINT [FK_Staff_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Role] ([RoleId]) ON DELETE CASCADE
); 
2023-11-17 10:33:47.888 +01:00 INF Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Address_HospitalId] ON [Address] ([HospitalId]); 
2023-11-17 10:33:47.891 +01:00 INF Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Resources_HospitalId] ON [Resources] ([HospitalId]); 
2023-11-17 10:33:47.894 +01:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Staff_HospitalId] ON [Staff] ([HospitalId]); 
2023-11-17 10:33:47.896 +01:00 INF Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Staff_RoleId] ON [Staff] ([RoleId]); 
2023-11-17 10:33:47.917 +01:00 INF Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231117093218_hospital', N'6.0.0'); 
